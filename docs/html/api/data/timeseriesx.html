

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>TimeSeries &mdash; PTSA 2.0.8 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Readers" href="readers.html" />
    <link rel="prev" title="ptsa.data" href="../data.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> PTSA
          

          
          </a>

          
            
            
              <div class="version">
                2.0.8
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../examples/index.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ramdata.html">Interacting with RAM Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../filters.html">Filtering Time Series</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">API Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../data.html">ptsa.data</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">TimeSeries</a></li>
<li class="toctree-l3"><a class="reference internal" href="readers.html">Readers</a></li>
<li class="toctree-l3"><a class="reference internal" href="filters.html">Filters</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../extensions.html">Extension Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#module-ptsa.filt">Filtering</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#module-ptsa.helper">Helpers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../development.html">Development guidelines</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">PTSA</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">API Reference</a> &raquo;</li>
        
          <li><a href="../data.html">ptsa.data</a> &raquo;</li>
        
      <li>TimeSeries</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/api/data/timeseriesx.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="timeseries">
<h1>TimeSeries<a class="headerlink" href="#timeseries" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt id="ptsa.data.timeseries.TimeSeries">
<em class="property">class </em><code class="sig-prename descclassname">ptsa.data.timeseries.</code><code class="sig-name descname">TimeSeries</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">coords</span></em>, <em class="sig-param"><span class="n">dims</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">attrs</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">encoding</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">fastpath</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptsa.data.timeseries.TimeSeries" title="Permalink to this definition">¶</a></dt>
<dd><p>A thin wrapper around <code class="xref py py-class docutils literal notranslate"><span class="pre">xr.DataArray</span></code> for dealing with time series
data.</p>
<p>Note that xarray internals prevent us from overriding the constructor which
leads to some awkwardness: you must pass coords as a dict with a
<code class="docutils literal notranslate"><span class="pre">samplerate</span></code> entry.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>array-like</em>) – Time series data</p></li>
<li><p><strong>coords</strong> (<em>dict-like</em>) – Coordinate arrays. This must contain at least a <code class="docutils literal notranslate"><span class="pre">samplerate</span></code>
coordinate.</p></li>
<li><p><strong>dims</strong> (<em>array-like</em>) – Dimension labels</p></li>
<li><p><strong>name</strong> (<em>str</em>) – Name of the time series</p></li>
<li><p><strong>attrs</strong> (<em>dict</em>) – Dictionary of arbitrary metadata</p></li>
<li><p><strong>encoding</strong> (<em>dict</em>) – </p></li>
<li><p><strong>fastpath</strong> (<em>bool</em>) – Not used, but required when subclassing <code class="xref py py-class docutils literal notranslate"><span class="pre">xr.DataArray</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>AssertionError</strong> – When <code class="docutils literal notranslate"><span class="pre">samplerate</span></code> is not present in <code class="docutils literal notranslate"><span class="pre">coords</span></code>.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><code class="xref py py-class docutils literal notranslate"><span class="pre">xr.DataArray</span></code></dt><dd><p>Base class</p>
</dd>
</dl>
</div>
<dl class="py method">
<dt id="ptsa.data.timeseries.TimeSeries.add_mirror_buffer">
<code class="sig-name descname">add_mirror_buffer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">duration</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptsa.data.timeseries.TimeSeries.add_mirror_buffer" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds mirrors data at both ends of the time series (up to specified
length/duration) and appends such buffers at both ends of the series.
The new series total time duration is:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">original</span> <span class="pre">duration</span> <span class="pre">+</span> <span class="pre">2</span> <span class="pre">*</span> <span class="pre">duration</span> <span class="pre">*</span> <span class="pre">samplerate</span></code></p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>duration</strong> (<em>float</em>) – Buffer duration in seconds.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>New time series with added mirrored buffer.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ptsa.data.timeseries.TimeSeries.append">
<code class="sig-name descname">append</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">other</span></em>, <em class="sig-param"><span class="n">dim</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptsa.data.timeseries.TimeSeries.append" title="Permalink to this definition">¶</a></dt>
<dd><p>Append another <a class="reference internal" href="#ptsa.data.timeseries.TimeSeries" title="ptsa.data.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a> to this one.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 2.0: </span>Appending along a dimension not present will cause that
dimension to be created.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>other</strong> (<a class="reference internal" href="#ptsa.data.timeseries.TimeSeries" title="ptsa.data.timeseries.TimeSeries"><em>TimeSeries</em></a>) – </p></li>
<li><p><strong>dim</strong> (<em>str</em><em> or </em><em>None</em>) – Dimension to concatenate on. If None, attempt to concatenate all
data using <code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.concatenate()</span></code>. If not present, a new
dimension will be created with coords [0,1].</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Appended TimeSeries</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ptsa.data.timeseries.TimeSeries.baseline_corrected">
<code class="sig-name descname">baseline_corrected</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">base_range</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptsa.data.timeseries.TimeSeries.baseline_corrected" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a baseline corrected timeseries by subtracting the
average value in the baseline range from all other time points
for each dimension.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>base_range</strong> (<em>{tuple}</em>) – Tuple specifying the start and end time range (inclusive)
for the baseline.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>ts</strong> – A TimeSeries instance with the baseline corrected data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>{TimeSeries}</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ptsa.data.timeseries.TimeSeries.create">
<em class="property">classmethod </em><code class="sig-name descname">create</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">samplerate</span></em>, <em class="sig-param"><span class="n">coords</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">dims</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">attrs</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptsa.data.timeseries.TimeSeries.create" title="Permalink to this definition">¶</a></dt>
<dd><p>Factory function for creating a new timeseries object with passing
the sample rate as a parameter. See <code class="xref py py-meth docutils literal notranslate"><span class="pre">__init__()</span></code> for parameters.</p>
</dd></dl>

<dl class="py method">
<dt id="ptsa.data.timeseries.TimeSeries.filter_with">
<code class="sig-name descname">filter_with</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filter_class</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptsa.data.timeseries.TimeSeries.filter_with" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter the time series data using the specified filter class.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filter_class</strong> (<em>type</em>) – The filter class to use.</p></li>
<li><p><strong>kwargs</strong> – Keyword arguments to pass along to <code class="docutils literal notranslate"><span class="pre">filter_class</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>filtered</strong> – The resulting data from the filter.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#ptsa.data.timeseries.TimeSeries" title="ptsa.data.timeseries.TimeSeries">TimeSeries</a></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>TypeError</strong> – When <code class="docutils literal notranslate"><span class="pre">filter_class</span></code> is not a valid filter class.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ptsa.data.timeseries.TimeSeries.filtered">
<code class="sig-name descname">filtered</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">freq_range</span></em>, <em class="sig-param"><span class="n">filt_type</span><span class="o">=</span><span class="default_value">'stop'</span></em>, <em class="sig-param"><span class="n">order</span><span class="o">=</span><span class="default_value">4</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptsa.data.timeseries.TimeSeries.filtered" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter the data using a Butterworth filter and return a new
TimeSeries instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>freq_range</strong> (<em>array-like</em>) – The range of frequencies to filter.</p></li>
<li><p><strong>filt_type</strong> (<em>str</em>) – Filter type (default: <code class="docutils literal notranslate"><span class="pre">'stop'</span></code>).</p></li>
<li><p><strong>order</strong> (<em>int</em>) – The order of the filter (default: 4).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>ts</strong> – A TimeSeries instance with the filtered data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#ptsa.data.timeseries.TimeSeries" title="ptsa.data.timeseries.TimeSeries">TimeSeries</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ptsa.data.timeseries.TimeSeries.from_hdf">
<em class="property">classmethod </em><code class="sig-name descname">from_hdf</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptsa.data.timeseries.TimeSeries.from_hdf" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a serialized time series from an HDF5 file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filename</strong> (<em>str</em>) – Path to HDF5 file.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ptsa.data.timeseries.TimeSeries.remove_buffer">
<code class="sig-name descname">remove_buffer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">duration</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptsa.data.timeseries.TimeSeries.remove_buffer" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the desired buffer duration (in seconds) and reset the
time range.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>duration</strong> (<em>float</em>) – The duration to be removed. The units depend on the samplerate:
E.g., if samplerate is specified in Hz (i.e., samples per second),
the duration needs to be specified in seconds and if samplerate is
specified in kHz (i.e., samples per millisecond), the duration needs
to be specified in milliseconds. The specified duration is removed
from the beginning and end.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>ts</strong> – A TimeSeries instance with the requested durations removed from the
beginning and/or end.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#ptsa.data.timeseries.TimeSeries" title="ptsa.data.timeseries.TimeSeries">TimeSeries</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ptsa.data.timeseries.TimeSeries.resampled">
<code class="sig-name descname">resampled</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">resampled_rate</span></em>, <em class="sig-param"><span class="n">window</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">loop_axis</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">num_mp_procs</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">pad_to_pow2</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptsa.data.timeseries.TimeSeries.resampled" title="Permalink to this definition">¶</a></dt>
<dd><p>Resamples the time series.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>resampled_rate</strong> (<em>float</em>) – New sample rate</p></li>
<li><p><strong>window</strong> – ignored for now - added for legacy reasons</p></li>
<li><p><strong>loop_axis</strong> – ignored for now - added for legacy reasons</p></li>
<li><p><strong>num_mp_procs</strong> – ignored for now - added for legacy reasons</p></li>
<li><p><strong>pad_to_pow2</strong> – ignored for now - added for legacy reasons</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Resampled time series</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ptsa.data.timeseries.TimeSeries.to_hdf">
<code class="sig-name descname">to_hdf</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'w'</span></em>, <em class="sig-param"><span class="n">data_kwargs</span><span class="o">=</span><span class="default_value">{'chunks': True}</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptsa.data.timeseries.TimeSeries.to_hdf" title="Permalink to this definition">¶</a></dt>
<dd><p>Save to disk using HDF5.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<em>str</em>) – Full path to the HDF5 file</p></li>
<li><p><strong>mode</strong> (<em>str</em>) – File mode to use. See the <code class="xref py py-mod docutils literal notranslate"><span class="pre">h5py</span></code> documentation for details.
Default: <code class="docutils literal notranslate"><span class="pre">'w'</span></code></p></li>
<li><p><strong>kwargs</strong> (<em>dict</em>) – Keyword arguments to be passed on to the create_dataset call for
the main data array (e.g., to specify compression; see the <code class="xref py py-mod docutils literal notranslate"><span class="pre">h5py</span></code>
documentation for details).</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>recarrays/DataFrame fields with “O” dtypes will be assumed to be strings
and encoded accordingly.</p>
</dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="readers.html" class="btn btn-neutral float-right" title="Readers" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../data.html" class="btn btn-neutral float-left" title="ptsa.data" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>